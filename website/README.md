You will need Node 6 or newer to build the Jest website.

The Jest website is built by Docusaurus.

# Run the server

The first time, get all the dependencies loaded via

```
npm install
```

Then, run the server via

```
npm start
Open http://localhost:3000/jest/index.html
```

You can also specify the port number

```
npm start -- --port 8080
Open http://localhost:8080/jest/index.html
```

Anytime you change the contents, just refresh the page and it's going to be updated

# Publish the website

The Jest website is hosted as a GitHub page. A static site is generated by running

```
npm run build
```

Note that the site uses translations downloaded from Crowdin, and the build will fail if translated files are not downloaded from Crowdin. To manually download files from Crowdin, edit the `crowdin.yaml` file in the outer folder to include the actual API key and project name instead of using environment variables which would be set for Circle. Then run `npm run crowdin-download`.

CircleCI is configured to generate the static site and pushed to the `gh-pages` branch whenever `master` is updated.

To deploy the website manually, run the following command as a Git user with write permissions:

```
DEPLOY_USER=facebook GIT_USER=jest-bot CIRCLE_PROJECT_USERNAME=facebook CIRCLE_PROJECT_REPONAME=jest CIRCLE_BRANCH=master npm run publish-gh-pages
```

## Staging

Run the above command against your own fork of `facebook/jest`:

```
DEPLOY_USER=YOUR_GITHUB_USERNAME GIT_USER=YOUR_GITHUB_USERNAME CIRCLE_PROJECT_USERNAME=YOUR_GITHUB_USERNAME CIRCLE_PROJECT_REPONAME=jest CIRCLE_BRANCH=master npm run publish-gh-pages
```
